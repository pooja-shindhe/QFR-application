<div class="container mt-4">
  <div class="mb-4">
    <h2><i class="bi bi-briefcase"></i> My Bids</h2>
    <p class="text-muted">Track all your submitted bids and their status</p>
  </div>

  @if (loading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  }

  @if (error) {
    <div class="alert alert-danger">{{ error }}</div>
  }

  @if (!loading && bids.length === 0) {
    <div class="card">
      <div class="card-body text-center py-5">
        <i class="bi bi-inbox" style="font-size: 4rem; color: #ccc;"></i>
        <h4 class="mt-3">No Bids Submitted Yet</h4>
        <p class="text-muted">Browse open RFQs and submit your first bid</p>
        <a routerLink="/open-rfq" class="btn btn-primary">Browse RFQs</a>
      </div>
    </div>
  }

  @if (!loading && bids.length > 0) {
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>Bid Number</th>
            <th>RFQ Title</th>
            <th>Quoted Price</th>
            <th>Delivery Time</th>
            <th>Status</th>
            <th>Submitted</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (bid of bids; track bid._id) {
            <tr style="cursor: pointer;" (click)="viewRFQ(bid.rfqId._id)">
              <td>{{ bid.bidNumber }}</td>
              <td>
                <strong>{{ bid.rfqId?.title }}</strong>
                <br>
                <small class="text-muted">{{ bid.rfqId?.rfqNumber }}</small>
              </td>
              <td class="text-success fw-bold">${{ bid.quotedPrice | number: '1.2-2' }}</td>
              <td>{{ bid.deliveryTime }} {{ bid.deliveryTimeUnit }}</td>
              <td>
                <span class="badge {{ getStatusBadgeClass(bid.status) }}">
                  {{ bid.status | uppercase }}
                </span>
              </td>
              <td>{{ bid.submittedAt | date: 'short' }}</td>
              <td>
                @if (bid.status === 'submitted') {
                  <button class="btn btn-sm btn-outline-danger"
                    (click)="withdrawBid(bid._id, $event)"
                    title="Withdraw Bid">
                    <i class="bi bi-x-circle"></i> Withdraw
                  </button>
                }
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>